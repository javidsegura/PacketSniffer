Compile with (note that it requires lpcap to be installed (default downloaded in macOS)): 
- gcc -o packet_sniffer packet_sniffer.c -lpcap

- Read more: https://www.tcpdump.org/pcap.html